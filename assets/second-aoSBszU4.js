import"./style-CwViLTPP.js";const l="irako5",u="4Xh-CudVw&u%.T4";let r=null;async function p(){try{const d=(await(await fetch("https://api.imgflip.com/get_memes")).json()).data.memes,e=document.getElementById("memesGrid");e.innerHTML="",d.forEach(a=>{const t=document.createElement("div");t.classList.add("meme-card"),t.dataset.id=a.id;const c=document.createElement("img");c.src=a.url,c.alt=a.name;const o=document.createElement("div");o.classList.add("meme-title"),o.textContent=a.name,t.appendChild(c),t.appendChild(o),e.appendChild(t),t.addEventListener("click",()=>{document.querySelectorAll(".meme-card").forEach(m=>m.classList.remove("selected")),t.classList.add("selected"),r=a.id;const i=document.querySelector(".create-button");i.classList.add("active"),i.disabled=!1})})}catch(n){console.error("Error when uploading memes:",n)}}function h(){const n=document.getElementById("searchInput"),s=document.getElementById("memesGrid"),d=document.createElement("div");d.textContent="Nothing was found",d.classList.add("not-found"),s.parentNode.insertBefore(d,s.nextSibling),n.addEventListener("input",()=>{const e=n.value.toLowerCase().trim(),a=document.querySelectorAll(".meme-card");let t=!1;a.forEach(c=>{c.querySelector(".meme-title").textContent.toLowerCase().includes(e)?(c.classList.remove("hidden"),t=!0):c.classList.add("hidden")}),d.classList.toggle("visible",!t)})}async function E(n,s,d){try{const e=new URLSearchParams;e.append("template_id",n),e.append("username",l),e.append("password",u),e.append("text0",s),e.append("text1",d);const t=await(await fetch("https://api.imgflip.com/caption_image",{method:"POST",body:e})).json();t.success?L(t.data.url):alert("Error when creating a meme: "+t.error_message)}catch(e){console.error("Error when creating a meme:",e)}}function L(n){const s=document.getElementById("createdMeme");s.innerHTML=`<h3>Your meme:</h3><img src="${n}" alt="Created Meme"/>`}function g(){const n=document.querySelector(".create-button"),s=document.getElementById("memeModal"),d=document.querySelector(".close-button"),e=document.getElementById("memeForm");n.disabled=!0,n.addEventListener("click",()=>{r&&s.classList.remove("hidden")}),d.addEventListener("click",()=>{s.classList.add("hidden"),e.reset(),document.getElementById("createdMeme").innerHTML=""}),window.addEventListener("click",a=>{a.target===s&&(s.classList.add("hidden"),e.reset(),document.getElementById("createdMeme").innerHTML="")}),e.addEventListener("submit",async a=>{a.preventDefault();const t=document.getElementById("text0").value,c=document.getElementById("text1").value;await E(r,t,c)})}document.addEventListener("DOMContentLoaded",()=>{p(),h(),g()});
